<DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Design by TEMPLATED
http://templated.co
Released for free under the Creative Commons Attribution License

Name       : ColoreGiallo 
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20121026

-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>GEF4530 - Practicals D1 - Computing and Visualization infrastructure</title>
<link href='http://fonts.googleapis.com/css?family=Oswald:400,300' rel='stylesheet' type='text/css' />
<link href='http://fonts.googleapis.com/css?family=Abel|Satisfy' rel='stylesheet' type='text/css' />
<link href="../../style.css" rel="stylesheet" type="text/css" media="screen" />
</head>
<body>
<img src="../../images/notur_norstore.jpg" align="middle" width="600" alt="" />
<br>
<br>
<ul>
<li><a href="#e-science">An e-infrastructure for Science</a></li>
<li><a href="#Notur">Notur</a></li>
  <ul>
    <li><a href="#whatis_Notur">What is Notur?</a></li>
    <li><a href="#abel">Abel computing facility</a></li>
    <li><a href="#notur_data">Available Filesystems on Abel </a></li>
  </ul>
<li><a href="#NorStore">NorStore</a></li>
  <ul>
    <li><a href="#whatis_NorStore">What is NorStore?</a></li>
    <li><a href="#cruncher">Cruncher post-processing and visualization facility</a></li>
    <li><a href="#norstore_data">Available Filesystems on Cruncher </a></li>
  </ul>
  </ul>
</ul>
<hr>
<br>
<br>
<h2 id="e-science">An e-infrastructure for Science</h2>
<br>
<a href="https://en.wikipedia.org/wiki/E-Science">E-science</a> is the application of computer technology to the undertaking of modern scientific investigation, including the preparation, experimentation, data collection, results dissemination, and long-term storage and accessibility of all materials generated through the scientific process. These may include data modeling and analysis, electronic/digitized laboratory notebooks, raw and fitted data sets, manuscript production and draft versions, preprints, and print and/or electronic publications.
<br>
<br>
<a href="https://www.kth.se/en/forskning/forskningsplattformar/ict/forskning/e-vetenskap-1.323973"><img src="../../images/e-science.png" align="middle" width="600" alt="" /></a>
<br>
<br>
The e-infrastructure for Science in Norway follows the same structure and provides users with both computing resources (<a href="#Notur">Notur</a>) and post-processing and visualization facilities with large storage capacity (<a href="#NorStore">NorStore</a>).
<br>
<br>
The picture below introduces the data life cycle from the generation of your model outputs on Notur computing facility (Abel) to the preservation of your model results in the <a href="https://archive.norstore.no/">NorStore archive</a>.
<br>
<img src="../../images/lifecycle.png" align="middle" alt="" />
<br>
<br>
<h2 id="Notur">Notur</h2>
<br>
<h3 id="whatis_Notur">What is Notur?</h3>
<br>
Through the Notur-project, <a href="https://www.sigma2.no/">UNINETT Sigma2</a> serves the Norwegian computational science community by providing the infrastructure to 
individuals or groups involved in education and research at Norwegian universities and colleges, and research and engineering at research institutes and industry who contribute to the funding of Notur.
<br>
The HPC-service provides the customer access to facilities and software with a far greater capacity than is normally available at department and faculty levels. The service is primarily set up to run simulation calculations for research and educations purposes, designed as batches.
<br>
<br>
For running <a href="http://www2.cesm.ucar.edu/">CESM CAM-5.3</a>, such computing facilities are necessary.
<br>
<br>
<h3 id="abel">Abel computing facility</h3>
<br>
<img alt="Abel small.jpg" src="../../images/130px-Abel.jpg" width="130" height="206"/>
<br>
Abel is a cluster machine:
<ul>
<li> 258.0 TFlops peak performance</li>
<li> 10000+ cores</li>
<li> 650+ nodes</li>
<li> 650+ Supermicro X9DRT compute nodes</li>
<li> dual Intel E5-2670 (Sandy Bridge) running at 2.6 GHz</li>
<li> 16 cores per node</li>
<li> 64GB Samsung DDR3 memory operating at 1600 MHz per node (4GB/core)</li>
<li> FDR (56 Gbits/s eq 6.78 Gbytes/s) InfiniBand interconnect</li>
<li> OS: Linux Environment, 64 bit Centos 6 </li></ul>
<br>
<br>
Abel is a large machine (cluster) made of  more than 10000 nodes (collection of machines linked together via an efficient network). 

On one single node, there are 16 cores and a total of 64 GB of shared memory. This shared memory can be accessed by all the processors of one single node but a processor on another node cannot access it. The image below attempts to summarize these two concepts (shared vs. distributed memory):

<br>
<img src="../../images/shared_distributedRAM.png"/>
<br>


To manage efficiently the machine, it runs under the control of a batch system. The fact is that one single program does not usually use the full machine (1392 CPUs) but many users can fill the machine very quickly with several "small" programs.

<br>
The opposite of a batch job is interactive processing, in which a user enters individual commands to be processed immediately. This is what you are used to when working on your laptop or any UIO servers (such as sverdrup.uio.no).
<br>
We need to use a batch system to make sure all the resources are well utilized and this is the role of the job scheduler to decide where to run user "jobs". Its role is to optimize the resources and to try to run as many user jobs as possible. It can be seen as a tetris game (see image below) where each block represents a user job.
<br>
<img src="../../images/tetris.png" width="130" height="206"/>
<br>
All user jobs must be submitted to the cluster through this batch system. Abel uses <a href="https://en.wikipedia.org/wiki/Slurm_Workload_Manager">SLURM</a> (Portable Batch System). The submitted jobs are then routed into a number of queues (depending on the needed resources, e.g. runtime) and sorted according to some priority scheme.
<br>
A job will run when the required resources become available. 
<br>
More information on the Batch system on Abel can be found <a href="http://www.uio.no/english/services/it/research/hpc/abel/help/user-guide/queue-system.html">here</a>.
<br>
<br>
<h3 id="notur_data">Available Filesystems on Abel</h3>
<br>
The following file systems exist on abel: 

<ul>
<li>User area (home directories): /home
<br>
The file system for user home directories on abel. This file system is currently very small, and it should NOT be used for processing data and running batch jobs (slow access). 
It has quota enabled, limits can be found <a href="http://www.uio.no/english/services/it/research/hpc/abel/help/user-guide/data.html">here</a> . Files are backed up daily, except for folders called "nobackup" and their sub-folders.
</li>
<li>Work area (temporary data): /work/users ($USERWORK)
<br>
Large external storage shared by all compute nodes on abel. Files are NOT backed up. /work should be used when running jobs since it's much larger than /home and is available on the compute nodes. /work/users is a <a href="https://en.wikipedia.org/wiki/BeeGFS">BeeGFS</a> parallel file system.
	</li>
</ul>
<b>Note:</b> the /work/users/* directories are subject to automatic deletion dependent on modification, access time and the total usage in the file system. The oldest files will be deleted first. 
<br>
<br>
<h2 id="NorStore">NorStore</h2>
<br>
<h3 id="whatis_NorStore">What is NorStore?</h3>
<br>
<a href="https://www.sigma2.no/node/8">NorStore</a> is the Norwegian infrastructure for storing scientific data. 
<br>
<br>
NorStore facility is divided in two parts:
<ul>
    <li>Active data, which are processed or being analysed, are stored in the <a href="https://www.sigma2.no/content/project-data-storage">Project Area</a>.</li>
    <li>When the data are no longer expected to change and/or results have been published, the data should normally be made accessible to the public. Data can be transferred to the <a href="https://www.sigma2.no/content/national-research-data-archive">NorStore Archive</a> from the Project area or directly uploaded.</li>
</ul>
<br>
<br>
When running the CAM-5.3 model on abel, the model outputs are generated and stored in the temporary working area (/work/users/$LOGNAME). As mentioned earlier, the working area on Abel is a temporary storage area and data must be moved to a more permanent storage area where you will be able to easily post-process and visualize your model results.
<br>
Model outputs will have to be moved from Abel working area (/work/users/$LOGNAME) to the norStore project area. You can use scp to copy your data from Abel to NorStore but the detailed procedure will be explained later.

<br>
<br>
<h3 id="cruncher">Cruncher</h3>
<br>
Once your model outputs are moved to norStore, you can start post-processing and generating plots. The machine you will be using for post-processing and visualizing your data is called cruncher.norstore.uio.no.
<br>
The main advantage of using this machine is that your data are directly accessible from cruncher and the necessary post-processing and visualization packages we need are already available (see <a href="https://www.sigma2.no/content/software">here</a> for a more complete list).
<br>
<br>
<h3 id="norstore_data">Available Filesystems on Cruncher</h3>
<br>
<br>
The following file systems exist on cruncher: 

<ul>
<li>User area (home directories): /home
<br>
The file system for user home directories on cruncher. This file system is currently very small, so it should NOT be used for storing your model outputs. 
</li>
<li>Project area : /projects/NS1000K/GEF4530
<br>
The file system provides users with a direct access to all data stored in your norStore project (NS1000K). There is no individual quota but a quota per project. To check the usage and the amount of available space for your project, use dusage:
<code><pre>
dusage -p NS1000K
</pre>
</code>
	</li>
</ul>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>
